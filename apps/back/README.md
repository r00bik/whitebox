# Whitebox Backend

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ NestJS —Å PostgreSQL 17 –∏ Prisma ORM. –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å Docker, CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏.

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏](./AUTHENTICATION.md)** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **[–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤](./CONTACTS.md)** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫—É –∏ –ø—Ä–∏–º–µ—Ä–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üìã –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Runtime**: Node.js 22
- **Framework**: NestJS 11
- **Database**: PostgreSQL 17
- **ORM**: Prisma 6
- **HTTP Server**: Fastify (–≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π)
- **Authentication**: JWT + bcrypt
- **Package Manager**: pnpm 10.12.1
- **Containerization**: Docker & Docker Compose
- **API Documentation**: Swagger/OpenAPI
- **Code Quality**: ESLint, Prettier, Husky

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 22+
- pnpm 10.12.1+
- Docker –∏ Docker Compose (–¥–ª—è –ë–î)
- PostgreSQL 17

### ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–∏–∑ –∫–æ—Ä–Ω—è –º–æ–Ω–æ—Ä–µ–ø–æ)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
pnpm run dev
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç PostgreSQL, pgAdmin, –±—ç–∫–µ–Ω–¥ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.

### üîß –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
cd apps/back
pnpm install
```

2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
cp .env.example .env
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –≤ Docker:

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –º–æ–Ω–æ—Ä–µ–ø–æ - —Ç–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pnpm run dev:up

# –ò–ª–∏ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ Docker Compose
docker-compose -f ../../docker-compose.dev.yml up -d
```

4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥–∏–Ω–≥:

```bash
pnpm db:migrate
pnpm db:seed
```

5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client:

```bash
pnpm db:generate
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
pnpm start:dev

# –ò–ª–∏ –∏–∑ –∫–æ—Ä–Ω—è –º–æ–Ω–æ—Ä–µ–ø–æ
pnpm run dev:backend
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ <http://localhost:3000>

### üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ö–æ–º–∞–Ω–¥—ã Prisma

- `pnpm db:migrate` - –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- `pnpm db:migrate:deploy` - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- `pnpm db:generate` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
- `pnpm db:studio` - –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
- `pnpm db:seed` - –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `pnpm db:reset` - –°–±—Ä–æ—Å–∏—Ç—å –ë–î –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

#### pgAdmin

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `docker-compose.dev.yml` pgAdmin –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ <http://localhost:5050>

- Email: <admin@example.com>
- Password: admin

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ:

- Host: postgres-dev (–∏–ª–∏ localhost –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–Ω–∞—Ä—É–∂–∏ Docker)
- Port: 5432
- Database: whitebox_db
- Username: postgres
- Password: postgres

### üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### –°–∫—Ä–∏–ø—Ç—ã –º–æ–Ω–æ—Ä–µ–ø–æ (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)

- `pnpm run dev` - üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã + backend + frontend)
- `pnpm run dev:backend` - üîß –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ backend
- `pnpm run dev:stop` - ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `pnpm run dev:up` - üê≥ –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- `pnpm run dev:down` - üê≥ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–∏–∑ apps/back)

- `pnpm start:dev` - –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `pnpm build` - –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- `pnpm start:prod` - –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫–∏
- `pnpm lint` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
- `pnpm test` - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ <http://localhost:3000/api> –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### üê≥ Docker

#### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose.dev.yml` - –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ PostgreSQL –∏ pgAdmin:

```bash
docker-compose -f docker-compose.dev.yml up -d
```

#### –ü—Ä–æ–¥–∞–∫—à–µ–Ω

–ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:

```bash
docker-compose up -d
```

### üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/whitebox_db?schema=public"

# App
NODE_ENV=development
PORT=3000
```

### üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
apps/back/
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts      # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.ts           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ auth/             # –ú–æ–¥—É–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (JWT)
‚îÇ   ‚îú‚îÄ‚îÄ contacts/         # –ú–æ–¥—É–ª—å —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ user/             # –ú–æ–¥—É–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ health/           # –ú–æ–¥—É–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îî‚îÄ‚îÄ prisma/           # –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îú‚îÄ‚îÄ prisma/               # –°—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma     # –°—Ö–µ–º–∞ Prisma
‚îÇ   ‚îú‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts          # –°–∏–¥–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ generated/            # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Prisma Client
‚îú‚îÄ‚îÄ dist/                # –°–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ Dockerfile           # Docker –æ–±—Ä–∞–∑ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
‚îú‚îÄ‚îÄ AUTHENTICATION.md     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ CONTACTS.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
‚îî‚îÄ‚îÄ README.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ NestJS

- **AppModule** - –∫–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **AuthModule** - –º–æ–¥—É–ª—å JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **ContactsModule** - –º–æ–¥—É–ª—å —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- **UserModule** - –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **HealthModule** - –º–æ–¥—É–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **PrismaModule** - –º–æ–¥—É–ª—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **ConfigModule** - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **PostgreSQL 17** —Å Prisma ORM
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏** –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- **Seed –¥–∞–Ω–Ω—ã–µ** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Prisma Client

### DevOps

- **Multi-stage Docker** —Å–±–æ—Ä–∫–∞
- **GitHub Actions** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
- **Health checks** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π setup** —Å–∫—Ä–∏–ø—Ç

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

```prisma
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      UserRole @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // –°–≤—è–∑–∏ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
  contacts        Contact[] @relation("UserContacts")
  contactedByUsers Contact[] @relation("ContactUser")

  @@map("users")
}

model Contact {
  id            String   @id @default(cuid())
  userId        String   // –í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç–∞–∫—Ç–∞
  contactUserId String   // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö
  notes         String?  // –õ–∏—á–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
  tags          String[] // –¢–µ–≥–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  user          User     @relation("UserContacts", fields: [userId], references: [id])
  contactUser   User     @relation("ContactUser", fields: [contactUserId], references: [id])

  @@unique([userId, contactUserId])
  @@map("contacts")
}

enum UserRole {
  USER
  ADMIN
}
```

### –ö–æ–º–∞–Ω–¥—ã Prisma

- `pnpm db:migrate` - –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- `pnpm db:generate` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
- `pnpm db:studio` - –û—Ç–∫—Ä—ã—Ç—å Prisma Studio
- `pnpm db:seed` - –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- `pnpm db:reset` - –°–±—Ä–æ—Å–∏—Ç—å –ë–î –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

## üê≥ Docker

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –¢–æ–ª—å–∫–æ PostgreSQL + pgAdmin
docker-compose -f docker-compose.dev.yml up -d

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
pnpm setup
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω

```bash
# –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫: PostgreSQL + Backend
docker-compose up -d
```

### –û–±—Ä–∞–∑—ã

- **postgres:17-alpine** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **whitebox-backend** - Multi-stage –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **dpage/pgadmin4** - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î

## üîß API Endpoints

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- `POST /v1/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /v1/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `GET /v1/auth/me` - –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (JWT)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- `POST /v1/contacts` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (JWT)
- `GET /v1/contacts` - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (JWT)
- `GET /v1/contacts/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ –ø–æ ID (JWT)
- `PUT /v1/contacts/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (JWT)
- `DELETE /v1/contacts/:id` - –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ (JWT)
- `PATCH /v1/contacts/:id/activate` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (JWT)
- `GET /v1/contacts/search` - –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (JWT)
- `GET /v1/contacts/archived` - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã (JWT)

### Health Check

- `GET /v1/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API

### Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `GET /api` - OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ

- `pnpm start:dev` - –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `pnpm build` - –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- `pnpm start:prod` - –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫–∏
- `pnpm lint` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
- `pnpm test` - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –£—Ç–∏–ª–∏—Ç—ã

- `pnpm db:studio` - –û—Ç–∫—Ä—ã—Ç—å Prisma Studio

## üîÑ CI/CD

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. **Lint & Test** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç—ã
2. **Build** - —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
3. **Publish** - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ registry (—Ç–æ–ª—å–∫–æ –Ω–∞ main/master)

Workflow –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- PostgreSQL 17 –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- Node.js 22
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit/Integration —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (45 —Ç–µ—Å—Ç–æ–≤)
pnpm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –º–æ–¥—É–ª—è–º
pnpm test auth.controller.spec.ts     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (13 —Ç–µ—Å—Ç–æ–≤)
pnpm test contacts.service.spec.ts    # –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–µ—Ä–≤–∏—Å (16 —Ç–µ—Å—Ç–æ–≤)
pnpm test contacts.controller.spec.ts # –ö–æ–Ω—Ç–∞–∫—Ç—ã API (16 —Ç–µ—Å—Ç–æ–≤)

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ watch
pnpm test:watch

# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
pnpm test:coverage
```

### HTTP API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ .http —Ñ–∞–π–ª—ã —Ä—è–¥–æ–º —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º [REST Client](https://marketplace.visualstudio.com/items?itemName=humao.rest-client) –≤ VS Code:

- `src/auth/auth.http` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `src/contacts/contacts.http` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `src/health/health.http` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ health check

**–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ API:**

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- **–ö–æ–Ω—Ç–∞–∫—Ç—ã**: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Health check —ç–Ω–¥–ø–æ–∏–Ω—Ç

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ REST Client –≤ VS Code
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π .http —Ñ–∞–π–ª –≤ `src/*/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `pnpm start:dev`
4. –ö–ª–∏–∫–Ω–∏—Ç–µ "Send Request" –Ω–∞–¥ –ª—é–±—ã–º –∑–∞–ø—Ä–æ—Å–æ–º

**–§–∞–π–ª—ã –ø–æ –º–æ–¥—É–ª—è–º:**

- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–º–µ–µ—Ç —Å–≤–æ–π .http —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `@baseUrl` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
